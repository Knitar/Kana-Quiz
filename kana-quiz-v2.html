<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä»®åã‚¯ã‚¤ã‚º v2.0 â€” Kana Quiz Engine</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;500;700;900&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles/kana-quiz-v2.css">

</head>
<body>

<div class="flash-overlay" id="flash-overlay"></div>

<div class="onboarding" id="onboarding">
  <div class="onboard-card">
    <div class="ob-kana">ã‚ ã„ ã†</div>
    <h2>Bienvenue dans Kana Quiz !</h2>
    <p>Apprenez les caractÃ¨res japonais pas Ã  pas. On commence avec le mode <strong>Ã‰tude</strong> pour dÃ©couvrir les kana, puis <strong>Quiz</strong> pour s'entraÃ®ner et <strong>DÃ©fi</strong> pour tester vos rÃ©flexes.</p>
    <button id="onboard-start">å§‹ã‚ã¾ã—ã‚‡ã† Commencer</button>
  </div>
</div>

<div class="celebration" id="celebration"><div class="celebration-text" id="celeb-text"></div></div>
<div id="confetti-layer"></div>

<header>
  <h1><span class="jp">ä»®å</span> Kana Quiz</h1>
  <div class="header-controls">
    <button class="icon-btn" id="dark-toggle" title="Mode sombre" aria-label="Basculer le mode sombre">ğŸŒ™</button>
    <button class="icon-btn" id="sound-toggle" title="Son" aria-label="Basculer le son">ğŸ”Š</button>
  </div>
</header>

<div class="container">
  <div class="settings-bar">
    <div class="mode-tabs" id="mode-tabs" role="tablist" aria-label="Mode de jeu">
      <button class="mode-tab" data-mode="study" role="tab" aria-selected="false">Ã‰tude</button>
      <button class="mode-tab active" data-mode="quiz" role="tab" aria-selected="true">Quiz</button>
      <button class="mode-tab" data-mode="mcq" role="tab" aria-selected="false">DÃ©fi</button>
    </div>
    <button class="settings-toggle" id="settings-toggle" aria-label="ParamÃ¨tres" aria-expanded="false">âš™</button>
  </div>

  <div class="settings-panel" id="settings-panel" role="region" aria-label="ParamÃ¨tres">
    <div class="settings-inner">
      <div class="settings-label">Ã‰criture</div>
      <div class="ctrl-row">
        <div class="ctrl-group" id="script-sel" role="radiogroup" aria-label="Type d'Ã©criture">
          <button class="ctrl-btn active" data-v="hiragana" role="radio" aria-checked="true">ã²ã‚‰ Hira</button>
          <button class="ctrl-btn" data-v="katakana" role="radio" aria-checked="false">ã‚«ã‚¿ Kata</button>
          <button class="ctrl-btn" data-v="mixed" role="radio" aria-checked="false">æ··åˆ Mix</button>
        </div>
      </div>
      <div class="settings-label">Deck</div>
      <div class="ctrl-row">
        <div class="ctrl-group" id="deck-sel" role="radiogroup" aria-label="Deck de caractÃ¨res">
          <button class="ctrl-btn active" data-v="basic" role="radio" aria-checked="true">åŸºæœ¬ Base</button>
          <button class="ctrl-btn" data-v="dakuten" role="radio" aria-checked="false">æ¿éŸ³ Dakuten</button>
          <button class="ctrl-btn" data-v="yoon" role="radio" aria-checked="false">æ‹—éŸ³ YÅon</button>
          <button class="ctrl-btn" data-v="all" role="radio" aria-checked="false">å…¨éƒ¨ Tout</button>
        </div>
      </div>
      <div class="settings-label">Taille de session</div>
      <div class="ctrl-row">
        <div class="ctrl-group" id="size-sel" role="radiogroup" aria-label="Taille de session">
          <button class="ctrl-btn" data-v="5" role="radio" aria-checked="false">5</button>
          <button class="ctrl-btn active" data-v="10" role="radio" aria-checked="true">10</button>
          <button class="ctrl-btn" data-v="20" role="radio" aria-checked="false">20</button>
          <button class="ctrl-btn" data-v="0" role="radio" aria-checked="false">âˆ</button>
        </div>
      </div>
      <div class="settings-label">Mode spÃ©cial</div>
      <div class="ctrl-row">
        <div class="ctrl-group" id="special-sel" role="radiogroup" aria-label="Mode spÃ©cial">
          <button class="ctrl-btn active" data-v="normal" role="radio" aria-checked="true">Normal</button>
          <button class="ctrl-btn" data-v="survival" role="radio" aria-checked="false">ğŸ«€ Survie</button>
          <button class="ctrl-btn" data-v="drill" role="radio" aria-checked="false">ğŸ¯ Drill</button>
        </div>
      </div>
    </div>
  </div>

  <div class="session-bar" id="session-bar">
    <div class="progress-track"><div class="progress-fill" id="progress-fill"></div></div>
    <div class="session-label" id="session-label">0/10</div>
  </div>

  <div class="lives-bar hidden" id="lives-bar">
    <span class="life" id="life-1">â¤ï¸</span>
    <span class="life" id="life-2">â¤ï¸</span>
    <span class="life" id="life-3">â¤ï¸</span>
  </div>

  <div class="study-pos hidden" id="study-pos"><strong id="study-idx">1</strong> / <span id="study-total">46</span></div>

  <div class="score-line" id="score-line">
    <span>Score <strong id="sc-pts">0</strong>/<strong id="sc-tot">0</strong></span>
    <span>SÃ©rie <strong id="sc-streak">0</strong>ğŸ”¥</span>
    <span class="pct" id="sc-pct">â€”</span>
  </div>

  <div class="time-display hidden" id="time-display">
    â± Moy: <span id="avg-time">â€”</span>ms Â· Meilleur: <span id="best-time">â€”</span>ms
  </div>

  <div class="quiz-card" id="quiz-card">
    <div class="card-badge" id="card-badge">HIRAGANA</div>
    <button class="speak-btn" id="speak-btn" title="Ã‰couter la prononciation" aria-label="Ã‰couter la prononciation">ğŸ”ˆ</button>
    <div class="prompt-display" id="prompt-display">ã‚</div>
    <div class="mnemonic" id="mnemonic"></div>
    <div class="vocab-example hidden" id="vocab-example"></div>

    <div class="study-answer hidden" id="study-answer">a</div>
    <div class="flip-prompt hidden" id="flip-prompt">ğŸ‘ Cliquer pour rÃ©vÃ©ler</div>
    <div class="srs-row hidden" id="srs-row">
      <button class="srs-btn srs-easy" data-v="easy">Facile</button>
      <button class="srs-btn srs-medium" data-v="medium">Moyen</button>
      <button class="srs-btn srs-hard" data-v="hard">Difficile</button>
    </div>
    <div class="study-nav hidden" id="study-nav">
      <button class="study-btn secondary" id="study-prev" aria-label="Carte prÃ©cÃ©dente">â† PrÃ©c</button>
      <button class="study-btn primary" id="study-next" aria-label="Carte suivante">Suiv â†’</button>
    </div>

    <div class="input-row" id="quiz-input-row">
      <input type="text" id="answer-input" placeholder="romaji..." autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" aria-label="Votre rÃ©ponse en romaji" />
      <button class="submit-btn" id="submit-btn" aria-label="Valider la rÃ©ponse">ç¢ºèª</button>
      <button class="skip-btn" id="skip-btn" title="Passer (comptÃ© comme erreur)" aria-label="Passer cette question">â­</button>
    </div>

    <div class="mcq-grid hidden" id="mcq-grid"></div>
    <div class="feedback" id="feedback"></div>
  </div>

  <div class="hint-bar" id="hint-bar"><kbd>Enter</kbd> valider Â· <kbd>Esc</kbd> rÃ©sultats</div>

  <div class="weak-section" id="weak-section">
    <div class="weak-header">
      <span class="weak-title">Points faibles</span>
      <button class="weak-drill-btn hidden" id="weak-drill-btn" aria-label="Lancer un drill sur les points faibles">Drill â†’</button>
    </div>
    <div class="weak-chips" id="weak-chips"><span style="font-size:0.72rem;color:var(--muted);font-style:italic">Aucune erreur pour le moment</span></div>
  </div>

  <div class="stats-section hidden" id="stats-section">
    <div class="stats-title">Progression</div>
    <div class="stats-grid" id="stats-grid"></div>
    <div class="stats-title" style="margin-top:0.5rem">ğŸŒŸ Points forts</div>
    <div class="strong-chips" id="strong-chips"></div>
  </div>
</div>

<div class="results-overlay" id="results-overlay">
  <div class="results-card">
    <div class="game-over-text hidden" id="game-over-text">ğŸ’€ GAME OVER</div>
    <h2 id="results-title">Session terminÃ©e !</h2>
    <div class="big-pct" id="final-pct">0%</div>
    <div class="r-detail" id="final-detail"></div>
    <div class="r-time hidden" id="final-time"></div>
    <div class="r-weak" id="final-weak"></div>
    <div class="btn-row">
      <button id="btn-next-session">Session suivante</button>
      <button class="sec" id="btn-reset-stats">Effacer stats</button>
    </div>
  </div>
</div>

<script src="scripts/kana-quiz-v2.js"></script>
</body>
</html>
